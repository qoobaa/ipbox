<table class="table" id="invoices">
  <thead>
    <tr>
      <th>Number</th>
      <th class="text-center">Period</th>
      <th class="text-right">Invoiced Hours</th>
      <th class="text-right">Logged Hours</th>
      <th class="text-right">Percentage</th>
    </tr>
  </thead>
  <tbody>
    <%= render @invoices %>
  </tbody>
  <tfoot>
    <tr>
      <th colspan="2" class="text-right">
        Total
      </th>
      <th class="text-right">
        <%= Invoice.sum(:hours) %>
      </th>
      <th class="text-right">
        <%= Invoice.joins(:entries).sum("entries.hours") %>
      </th>
      <th class="text-right">
        <%= number_to_percentage(Invoice.all.map(&:ratio).sum / Invoice.all.size * 100, precision: 0)  %>
      </th>
    </tr>
  </tfoot>
</table>
